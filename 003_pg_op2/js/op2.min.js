(function(){window.op2={init:function(){var a={init:function(){a.parser=new Parser;this.panels.lex.lexButton.onclick();var c=this;a.parser.addChangeIndexListener(function(a,b){c.panels.lexTable.clearClassName();c.panels.lexTable.setClassName("selected",0,b)});this.vars.addChangeVarListener(function(c,b,d){switch(b){case "tok_prec":c.varComment("tok_prec",d);c.comment(9,a.createCompStr(c.vars("expr_prec"),">",d));c.removeComment(12);c.removeComment(17);c.removeComment(18);break;case "next_prec":c.varComment("next_prec",
d);c.comment(18,a.createCompStr(c.vars("tok_prec"),"<",d));break;case "op2":c.varComment("op2",d.nodeChar)}})},setup:function(){a.parser.setTokens(a.tokens);a.root={nodeText:"dummy"};a.vtree.root(a.root).update();this.panels.codeTable.removeAllComments()},parse_primary:function(){var c=a.parser.parsePrimary();a.appendChild(c);return c},get_tok_precedence:function(){return a.parser.getPrecedence()},get_cur_token:function(){return a.parser.token},get_next_token:function(){a.parser.nextToken()},create_op2_ast:function(c,
d,b){c=a.parser.createOp2AST(c,d,b);a.appendOp2Child(c,d,b);return c},createCompStr:function(a,d,b){return[">"===d?a>b?"True, ":"False, ":a<b?"True, ":"False, ",a,a===b?" == ":a<b?" < ":" > ",b].join("")},appendChild:function(c){a.root.children||(a.root.children=[]);a.root.children.push(c);a.vtree.update()},appendOp2Child:function(c,b,d){a.root.children||(a.root.children=[]);a.root.children.push(c);a.removeChild(b);a.removeChild(d);a.vtree.update()},removeChild:function(c){a.root.children&&(c=a.root.children.indexOf(c),
-1!==c&&a.root.children.splice(c,1))},clearAllComments:function(){this.panels.codeTable.removeAllComments()}},b=new sc.StepCells({parse_op2_rhs:{params:["expr_prec","lhs"],pos:[5,1]}},[[[20,"setup",[]]],[],[[4,[15,"lhs"],[20,"parse_primary",[]]]],[[19,"parse_op2_rhs",[0,[15,"lhs"]]]],[],[[25,23,3],[0]],[[0],1,[26,23,1]],[[4,[15,"tok_prec"],[20,"get_tok_precedence",[]]]],[],[[13,[15,"expr_prec"],[15,"tok_prec"]],[26,12,1]],[[20,"clearAllComments",[]],[21,[15,"lhs"]]],[],[[25,12,2],[0],[0],[4,[15,"op2"],
[20,"get_cur_token",[]]]],[[20,"get_next_token",[]]],[],[[4,[15,"rhs"],[20,"parse_primary",[]]]],[],[[4,[15,"next_prec"],[20,"get_tok_precedence",[]]]],[[11,[15,"tok_prec"],[15,"next_prec"]],[26,21,1]],[[19,"parse_op2_rhs",[[5,[15,"tok_prec"],1],[15,"rhs"]]],[4,[15,"rhs"],[24]]],[],[[25,21,2],[0],[0],[4,[15,"lhs"],[20,"create_op2_ast",[[15,"op2"],[15,"lhs"],[15,"rhs"]]]]],[],[[25,6,0],[0],[30,[21]],[0]]],a),l=document.getElementById("treeContainer"),d=document.getElementById("buttonsContainer"),n=
document.getElementById("lexTable"),h=document.getElementById("lexContainer"),k=document.getElementsByClassName("highlighttable")[0],g=document.getElementById("message");b.panels.buttons=new sc.panels.Buttons(b,{container:d,showRunButton:!0});b.panels.lexTable=new sc.panels.Table(b,{table:n});b.panels.lex=new sc.panels.Lex(b,{container:h});b.panels.tree=new sc.panels.Tree(b,{container:l,width:370,height:440});b.panels.codeTable=new sc.panels.CodeTable(b,{codeTable:k});b.addErrorListener(function(a,
b){g.innerHTML=b});a.init&&a.init.call(b);b.reset()}}})();(function(){function a(a,g,c){c=c.container;helpers.addClass(c,"sc-lex-panel");c.innerHTML="\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\uff1a<input class='sc-lex-src' type='text' value='a + b + (c + d) * e * f + g' style='width: 16em;' /><input class='sc-lex-button' type='button' value='\u5b57\u53e5\u89e3\u6790' /><div class='sc-lex-message'></div>";var r=c.getElementsByClassName("sc-lex-src")[0],t=c.getElementsByClassName("sc-lex-message")[0];a.lexButton=c.getElementsByClassName("sc-lex-button")[0];a.lexButton.onclick=
function(){try{for(var a,c=r.value,f=0,k=[];;){if(f>=c.length){k.push({nodeChar:"$",className:"node-type-none",toString:b});break}var m=c.substr(f),e=l.exec(m);e&&(f+=e[1].length,m=c.substr(f));if(e=h.exec(m)){var p="none";if("+"===e[1]||"-"===e[1])p=2;else if("*"===e[1]||"/"===e[1])p=3;k.push({nodeChar:e[1],className:"node-type-"+p,toString:b});f+=e[1].length}else if(e=n.exec(m))k.push({nodeChar:"V",className:"node-type-4",nodeText:e[1],toString:b}),f+=e[1].length;else if(e=d.exec(m)){var q=parseInt(e[1]);
k.push({nodeChar:"n",className:"node-type-5",nodeText:""+q,num:q,toString:b});f+=e[1].length}else throw["(pos ",f+1,") unknown token: "+m[0]].join("");}a=k}catch(u){a=[{nodeChar:"$",className:"node-type-none",toString:b}],t.innerHTML=u}g.js.tokens=a;g.reset();g.panels.lexTable.deleteAll();g.panels.lexTable.insertRow(a)}}function b(){return this.nodeChar}sc.panels.Lex=function(b,d){a(this,b,d)};var l=/^([ \t]+)/,d=/^(\d+)/,n=/^([a-zA-Z_]\w*)/,h=/^([\+\-\*\/\(\)^])/})();(function(){function a(){helpers.createEvent(this,"ChangeIndex")}window.Parser=a;a.prototype.setTokens=function(a){this.tokens=a;this.reset()};a.prototype.reset=function(){this.i=-1;this.nextToken()};a.prototype.parse=function(){return this.parseExpression()};var b={nodeChar:"$"};a.prototype.nextToken=function(){this.tokens&&this.i+1<this.tokens.length?(this.i++,this.token=this.tokens[this.i],this.notifyChangeIndex(this,this.i)):this.token=b};var l={"+":20,"-":20,"*":40,"/":40};a.prototype.parseExpression=
function(){var a=this.parsePrimary();return this.parseOp2RHS(0,a)};a.prototype.parseOp2RHS=function(a,b){for(;;){var h=this.getPrecedence();if(h<a)return b;var k=this.token;this.nextToken();var g=this.parsePrimary(),c=this.getPrecedence();h<c&&(g=this.parseOp2RHS(h+1,g));return this.createOp2AST(k,b,g)}};a.prototype.createOp2AST=function(a,b,h){b={nodeChar:a.nodeChar,children:[b,h]};b.className=a.className;return b};a.prototype.getPrecedence=function(){var a=this.token.nodeChar;return a in l?l[a]:
-1};a.prototype.parsePrimary=function(){switch(this.token.nodeChar){case "V":return this.parseID();case "n":return this.parseNumber();case "(":return this.parseParen();default:throw"\u3053\u3093\u306a\u30c8\u30fc\u30af\u30f3\u304c\u6765\u308b\u3068\u306f\u601d\u3063\u3066\u307e\u305b\u3093\u3067\u3057\u305f: "+this.token.nodeChar;}};a.prototype.parseNumber=function(){var a=this.token;this.nextToken();return a};a.prototype.parseParen=function(){this.nextToken();var a=this.parseExpression();if(")"!==
this.token.nodeChar)throw"\u9589\u3058\u30ab\u30c3\u30b3 ')' \u304c\u629c\u3051\u3066\u3044\u307e\u3059\u3002";this.nextToken();return a};a.prototype.parseID=function(){var a=this.token;this.nextToken();return a}})();
